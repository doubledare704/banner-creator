var datastructure=function(){function d(a){this.point=a,this.leftChild=null,this.rightChild=null}function e(a){for(var b={maxX:-Math.pow(2,31),minX:Math.pow(2,31)-1,maxY:-Math.pow(2,31),minY:Math.pow(2,31)-1},c=0;c<a.length;++c)b.minX=Math.min(b.minX,a[c].x),b.minY=Math.min(b.minY,a[c].y),b.maxX=Math.max(b.maxX,a[c].x),b.maxY=Math.max(b.maxY,a[c].y);this.rootNode=f(a,0,b)}function f(e,g,h){if(0==e.length)return null;var i=g%c;e.sort(function(b,c){return i==a?b.x-c.x:b.y-c.y});var j=Math.floor(e.length/2),k=new d(e[j]);k.boundingRect=h;var l={minX:h.minX,maxX:i==a?k.point.x:h.maxX,minY:h.minY,maxY:i==b?k.point.y:h.maxY},m={minX:i==a?k.point.x:h.minX,maxX:h.maxX,minY:i==b?k.point.y:h.minY,maxY:h.maxY};return k.leftChild=f(e.slice(0,j),g+1,l),k.rightChild=f(e.slice(j+1),g+1,m),k}function g(a,b,c){var d;for(d=a.length-1;d>=0;--d){var e=a[d];if(b.distance>e.distance)break}a.splice(d+1,0,b),a.length>c&&a.pop()}function h(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}var a=0,b=1,c=2;e.prototype.getNearestNeighbour=function(a,b){var c=[];return this.getNearestNeighbours_(this.rootNode,a,0,c,1,b),0==c.length?null:c[0].node.point},e.prototype.getNearestNeighbours=function(a,b,c){var d=[];this.getNearestNeighbours_(this.rootNode,a,0,d,b,c);for(var e=[],f=0;f<d.length;++f)e.push(d[f].node.point);return e},e.prototype.getNearestNeighbours_=function(b,d,e,f,i,j){j&&j.push(b.point);var k=e%c,l=h(d.x,d.y,b.point.x,b.point.y),m={node:b,distance:l};g(f,m,i);var n=k==a?d.x:d.y,o=k==a?b.point.x:b.point.y,p=n<o,q=p?b.leftChild:b.rightChild,r=p?b.rightChild:b.leftChild;if(q&&this.getNearestNeighbours_(q,d,e+1,f,i,j),r){var s,t;k==a?(s=b.point.x,t=d.y,d.y<r.boundingRect.minY?t=r.boundingRect.minY:d.y>r.boundingRect.maxY&&(t=r.boundingRect.maxY)):(t=b.point.y,s=d.x,d.x<r.boundingRect.minX?s=r.boundingRect.minX:d.x>r.boundingRect.maxX&&(s=r.boundingRect.maxX));var u=h(d.x,d.y,s,t);u<=f[f.length-1].distance&&this.getNearestNeighbours_(r,d,e+1,f,i,j)}};var i={};return i.KDTree=e,i}();