function VINTAGE_CLASS(){var a=!1;this.adjust_color=function(a,b,c,d){var e=0,f=0,g=a.getImageData(0,0,b,c),h=ImageFilters.ColorTransformFilter(g,1,1,1,1,d,e,f,1);a.putImageData(h,0,0)},this.lower_contrast=function(a,b,c,d){var e=a.getImageData(0,0,b,c),f=ImageFilters.BrightnessContrastPhotoshop(e,0,-d);a.putImageData(f,0,0)},this.blur=function(a,b,c,d){if(d<1)return a;var e=a.getImageData(0,0,b,c),f=ImageFilters.GaussianBlur(e,d);a.putImageData(f,0,0)},this.light_leak=function(a,b,c,d){var e=this.getRandomInt(0,b),f=this.getRandomInt(0,c),g=.6*Math.min(b,c),h=canvas_active().createRadialGradient(e,f,g*d/255,e,f,g);h.addColorStop(0,"rgba(255, 165, 0, "+d/255+")"),h.addColorStop(1,"rgba(255, 255, 255, 0)"),a.fillStyle=h,a.fillRect(0,0,b,c)},this.chemicals=function(a,b,c,d){var e=a.getImageData(0,0,b,c),f=ImageFilters.HSLAdjustment(e,0,-d,0);a.putImageData(f,0,0)},this.exposure=function(a,b,c,d){a.rect(0,0,b,c);var e=canvas_active().createLinearGradient(0,0,0,c);this.getRandomInt(1,10)<5?(e.addColorStop(0,"rgba(0, 0, 0, "+d/255+")"),e.addColorStop(1,"rgba(255, 255, 255, "+d/255+")")):(e.addColorStop(0,"rgba(255, 255, 255, "+d/255+")"),e.addColorStop(1,"rgba(0, 0, 0, "+d/255+")")),a.fillStyle=e,a.fill()},this.grains=function(a,b,c,d){if(0==d)return a;for(var e=a.getImageData(0,0,b,c),f=e.data,g=0;g<c;g++)for(var h=0;h<b;h++){var i=4*(h+g*b);if(0!=f[i+3]){var j=this.getRandomInt(0,d);0!=j&&(f[i]-j<0?f[i]=-(f[i]-j):f[i]=f[i]-j,f[i+1]-j<0?f[i+1]=-(f[i+1]-j):f[i+1]=f[i+1]-j,f[i+2]-j<0?f[i+2]=-(f[i+2]-j):f[i+2]=f[i+2]-j)}}a.putImageData(e,0,0)},this.grains_big=function(a,b,c,d){if(0==d)return a;for(var e=b*c/100*d,f=200,g=0;g<e;g++){var h=this.getRandomInt(5,10+d),i=2,j=this.getRandomInt(0,b),k=this.getRandomInt(0,c);a.fillStyle="rgba("+f+", "+f+", "+f+", "+h/255+")",a.fillRect(j,k,i,i)}},this.optics=function(b,c,d,e,f){0==a&&(a=fx.canvas());var g=a.texture(b.getImageData(0,0,c,d));a.draw(g).vignette(e,f).update(),b.drawImage(a,0,0)},this.dusts=function(a,b,c,d){var e=d/100*(b*c)/1e3;a.fillStyle="rgba(200, 200, 200, 0.3)";for(var f=0;f<e;f++){var g=this.getRandomInt(0,b),h=this.getRandomInt(0,c),i=this.getRandomInt(1,2);if(1==i)var j=1,k=this.getRandomInt(1,3);else if(2==i)var j=this.getRandomInt(1,3),k=1;a.beginPath(),a.rect(g,h,j,k),a.fill()}a.strokeStyle="rgba(200, 200, 200, 0.2)";for(var f=0;f<e/3;f++){var g=this.getRandomInt(0,b),h=this.getRandomInt(0,c),l=this.getRandomInt(5,15),m=this.getRandomInt(0,20)/10,n=Math.PI*m,o=Math.PI*(m+this.getRandomInt(7,15)/10);a.beginPath(),a.arc(g,h,l,n,o),a.stroke()}return a},this.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a}}var VINTAGE=new VINTAGE_CLASS;