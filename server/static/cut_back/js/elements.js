function ELEMENTS_CLASS(){this.line=function(a,b,c,d,e,f){a.beginPath(),void 0!=f&&(a.lineWidth=f),a.moveTo(b+.5,c+.5),a.lineTo(d+.5,e+.5),a.stroke()},this.rectangle=function(a,b,c,d,e,f,g){b+=.5,c+=.5,"undefined"==typeof g&&(g=!0),0==f&&void 0==g&&(g=!0),a.beginPath(),a.moveTo(b,c),a.lineTo(b+d,c),a.quadraticCurveTo(b+d,c,b+d,c),a.lineTo(b+d,c+e),a.quadraticCurveTo(b+d,c+e,b+d,c+e),a.lineTo(b,c+e),a.quadraticCurveTo(b,c+e,b,c+e),a.lineTo(b,c),a.quadraticCurveTo(b,c,b,c),a.closePath(),g&&a.stroke(),f&&a.fill()},this.square=function(a,b,c,d,e,f,g){b+=.5,c+=.5,"undefined"==typeof g&&(g=!0),0==f&&void 0==g&&(g=!0),Math.abs(d)<Math.abs(e)?d=d>0?Math.abs(e):-Math.abs(e):e=e>0?Math.abs(d):-Math.abs(d),a.beginPath(),a.moveTo(b,c),a.lineTo(b+d,c),a.quadraticCurveTo(b+d,c,b+d,c),a.lineTo(b+d,c+e),a.quadraticCurveTo(b+d,c+e,b+d,c+e),a.lineTo(b,c+e),a.quadraticCurveTo(b,c+e,b,c+e),a.lineTo(b,c),a.quadraticCurveTo(b,c,b,c),a.closePath(),g&&a.stroke(),f&&a.fill()},this.circle=function(a,b,c,d,e){a.lineWidth=1,void 0!=e?a.strokeStyle=e:a.strokeStyle="#000000",a.beginPath(),a.arc(b,c,d/2,0,2*Math.PI,!0),a.stroke()},this.ellipse_by_center=function(a,b,c,d,e,f,g){this.ellipse(a,b-d/2,c-e/2,d,e,f,g)},this.ellipse=function(a,b,c,d,e,f,g){var h=.5522848,i=d/2*h,j=e/2*h,k=b+d,l=c+e,m=b+d/2,n=c+e/2;a.beginPath(),a.moveTo(b,n),a.bezierCurveTo(b,n-j,m-i,c,m,c),a.bezierCurveTo(m+i,c,k,n-j,k,n),a.bezierCurveTo(k,n+j,m+i,l,m,l),a.bezierCurveTo(m-i,l,b,n+j,b,n),a.closePath(),a.fillStyle=f,a.strokeStyle=f,void 0==g?a.stroke():a.fill()},this.arrow=function(a,b,c,d,e,f){void 0==f&&(f=10);var g=d-b,h=e-c,i=Math.atan2(h,g);a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.beginPath(),a.moveTo(d-f*Math.cos(i-Math.PI/6),e-f*Math.sin(i-Math.PI/6)),a.lineTo(d,e),a.lineTo(d-f*Math.cos(i+Math.PI/6),e-f*Math.sin(i+Math.PI/6)),a.stroke()},this.rectangle_dashed=function(a,b,c,d,e,f,g){this.line_dashed(a,b,c,d,c,f,g),this.line_dashed(a,d,c,d,e,f,g),this.line_dashed(a,d,e,b,e,f,g),this.line_dashed(a,b,e,b,c,f,g)},this.line_dashed=function(a,b,c,d,e,f,g){b+=.5,c+=.5,d+=.5,e+=.5,void 0!=g?a.strokeStyle=g:a.strokeStyle="#000000",void 0==f&&(f=4),a.beginPath(),a.moveTo(b,c);for(var h=d-b,i=e-c,j=Math.floor(Math.sqrt(h*h+i*i)/f),k=h/j,l=i/j,m=0;m++<j;)b+=k,c+=l,a[m%2==0?"moveTo":"lineTo"](b,c);a[m%2==0?"moveTo":"lineTo"](d,e),a.stroke(),a.closePath()},this.image_round=function(a,b,c,d,e,f,g){var h=Math.round(d/2),i=f.getContext("2d"),j=b-h,k=c-h;j<0&&(j=0),k<0&&(k=0),i.clearRect(0,0,WIDTH,HEIGHT),i.save();try{i.drawImage(e,b-h,c-h,d,d)}catch(a){try{i.putImageData(e,j,k)}catch(a){console.log("Error: "+a.message)}}if(i.globalCompositeOperation="destination-in",i.fillStyle="#ffffff",1==g){var l=i.createRadialGradient(b,c,0,b,c,h);l.addColorStop(0,"#ffffff"),l.addColorStop(.8,"#ffffff"),l.addColorStop(1,"rgba(25115,255,255,0"),i.fillStyle=l}i.beginPath(),i.arc(b,c,h,0,2*Math.PI,!0),i.fill(),j+d>WIDTH&&(d=WIDTH-j),k+d>HEIGHT&&(d=HEIGHT-k),a.drawImage(f,j,k,d,d,j,k,d,d),i.restore(),i.clearRect(0,0,WIDTH,HEIGHT)}}var EL=new ELEMENTS_CLASS,BezierCurveBrush={iPrevX:0,iPrevY:0,points:null,init:function(){},startCurve:function(a,b){this.iPrevX=a,this.iPrevY=b,this.points=new Array},getPoint:function(a,b){var d,c=b.length-a;for(d=c;d<b.length;d++)if(b[d])return b[d]},draw:function(a,b,c,d,e){if(Math.abs(this.iPrevX-c)>5||Math.abs(this.iPrevY-d)>5){this.points.push([c,d]),a.beginPath(),a.moveTo(this.iPrevX,this.iPrevY),a.lineTo(c,d),a.lineWidth=e,a.lineCap="round",a.lineJoin="round",a.strokeStyle="rgba("+b.r+", "+b.g+", "+b.b+", 0.9)",a.stroke(),a.closePath(),a.lineWidth=1,a.strokeStyle="rgba("+b.r+", "+b.g+", "+b.b+", 0.2)",a.beginPath();var f=this.getPoint(25,this.points),g=this.getPoint(1,this.points),h=this.getPoint(5,this.points);a.moveTo(f[0],f[1]),a.bezierCurveTo(g[0],g[1],h[0],h[1],c,d),a.stroke(),a.closePath(),this.iPrevX=c,this.iPrevY=d}}};